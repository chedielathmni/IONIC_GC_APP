<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>
      Achats
    </ion-title>
    <ion-button (click)="presentAlertModal()" color="danger" slot="end" class="alert-button">
      <ion-icon name="mail" style="margin-right: 4px;"></ion-icon>Alerte
    </ion-button>
  </ion-toolbar>
</ion-header>


<ion-content [fullscreen]="true">


    <ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)" pullFactor="0.5" pullMin="100" pullMax="200">
      <ion-refresher-content></ion-refresher-content>
    </ion-refresher>


  <div *ngIf="purchases" style="margin-bottom: 80px;">
    <ion-card *ngFor="let p of purchases ">
      <ion-item>
        <ion-label>
          <div class="container">
            <div class="row">
              <div class="col-6">
                <h3>Type: {{ p.gas_type }} </h3>
              </div>
              <div class="col-6">
                <h3>Montant: {{ p.price}} TN</h3>
              </div>
            </div>
            <div class="row">
              <div class="col-8">
                <p>Date: {{ p.purchase_date |  date:'dd/MM/yyyy'}}</p>
              </div>
              <div class="col-4">
                <p>Heure: {{ p.purchase_date |  date:'HH:mm'}}</p>
              </div>
            </div>
          </div>
        </ion-label>
      </ion-item>
    </ion-card>


    <ion-infinite-scroll threshold="5%" position="bottom" (ionInfinite)="loadData($event)">
      <ion-infinite-scroll-content loadingSpinner="bubbles" loadingText="Loading more data...">
      </ion-infinite-scroll-content>
    </ion-infinite-scroll>
  </div>

  <ion-fab slot="fixed" vertical="bottom" horizontal="center">
    <ion-fab-button (click)="presentModal()">
      <ion-icon name="add"></ion-icon>
    </ion-fab-button>
  </ion-fab>

</ion-content>